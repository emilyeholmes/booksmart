<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recommendations</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        #page-body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        #back {
            margin-left: 1vw;
            cursor: pointer;
            text-align: center;
            padding: 5px 10px;
            padding-top: 6px;
            border-radius: 20px;
            border: 2px solid #70566D;
            background-color: #D4CBE5;
        }

        #top-bar {
            display: flex;
            width: 70vw;
            justify-content: space-between;
            flex-direction: row;
            margin: 2vw;
            margin-bottom: 0vw;
        }

        #shelves {
            cursor: pointer;
        }

        #recommendation-body {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 1vh;
            justify-content: center;
        }

        #book-img {
            max-width: 150px;
            max-height: 220px;
            margin: 20px;
        }

        #desc {
            max-width: 58%;
            margin: 20px;
            text-align: center;
            /* color: #42273B; */
        }

        #result {
            margin: 8px;
            font-style: italic;
            font-weight: bold;
        }

        #horizontal {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        #tags {
            display: flex;
            flex-direction: row;
            align-items: space-between;
        }

        .tag {
            padding: 5px 10px;
            margin: 1vh;
            background-color: #ca45d8;
            border-radius: 20px;
            font-weight: bold;
        }

        .swipe {
            max-width: 130px;
            margin: 8vw;
            cursor: pointer;
        }

        .spinner {
            margin: 5vh;
            margin-top: 10vh;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #333;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>


<body>
    <header>
        <h1>BookSmart!</h1>
    </header>

    <nav class="navbar bg-body-tertiary fixed-top">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
                aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand" href="../index.html">BookSmart</a>
            <form class="d-flex" role="search"  action="../book-search/task1.html">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" id="book-input-1">
                <button class="btn btn-outline-success" type="submit" id="book-search-1">Search</button>
            </form>
            <!-- <img class="profile-pic" src="/images/profile.svg"/> -->



            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar"
                aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasNavbarLabel"><a href="../index.html">BookSmart</a></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="../index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="recommendations/task3.html">Recommendations</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../discussions/task2.html">Discussions</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                Dropdown
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">Action</a></li>
                                <li><a class="dropdown-item" href="#">Another action</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#">Something else here</a></li>
                            </ul>
                        </li>
                    </ul>
                    <form class="d-flex mt-3" role="search">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-outline-success" type="submit">Search</button>
                    </form>
                </div>
            </div>
            <div class="btn-group">
                <button type="button" class="btn btn-secondary">
                    <img src="../images/profile.svg" alt="Button Image">
                </button>
            </div>
    </nav>


    <main>

        <div id="page-body">
            <h1 style="margin-top: 1vh"><strong> My Recommendations </strong></h1>

            <div id="top-bar">
                <h6 id="back" style="visibility: hidden"><em>go back..</em>.</h6>
                <ul id="shelves" style="visibility: hidden;"></ul>
            </div>



            <div id="loading-spinner" style="display: none;">
                <div class="spinner"></div>
            </div>

            <div id="horizontal">

                <div id="dislike">
                    <img class="swipe" src="dislike.png" alt="dislike button">
                </div>

                <div id="recommendation-body">
                    <h3 id="result"></h3>
                    <h5 style="color: #42273B;" id="author"></h5>
                    <img id="book-img" src="" alt="cover image of recommended book">
                    <div id="tags">
                        <p class="tag" id="word1"></p>
                        <p class="tag" id="word2"></p>
                        <p class="tag" id="word3"></p>
                    </div>
                    <!-- <button id="get-rec">Get New Recommendation!</button> -->
                </div>

                <div id="like">
                    <img class="swipe" src="like.png" alt="like button">
                </div>

            </div>

            <p id="desc"></p>

        </div>

    </main>

    <script>
        let alreadyRecommended = [];
        let liked = [];
        let disliked = [];

        let currentRec;
        let lastDesc;
        let lastImg;
        let lastAuthor;

        let descriptions = {
            'Anansi Boys': "Fat Charlie Nancy's normal life ended the moment his father dropped dead on a Florida karaoke stage. Charlie didn't know his dad was a god. And he never knew he had a brother. Now brother Spider's on his doorstep—about to make Fat Charlie's life more interesting . . . and a lot more dangerous.", 'One Hundred Years of Solitude': "One of the 20th century's enduring works, One Hundred Years of Solitude is a widely beloved and acclaimed novel known throughout the world, and the ultimate achievement in a Nobel Prize–winning career. The novel tells the story of the rise and fall of the mythical town of Macondo through the history of the Buendía family. It is a rich and brilliant chronicle of life and death, and the tragicomedy of humankind. In the noble, ridiculous, beautiful, and tawdry story of the Buendía family, one sees all of humanity, just as in the history, myths, growth, and decay of Macondo, one sees all of Latin America. Love and lust, war and revolution, riches and poverty, youth and senility -- the variety of life, the endlessness of death, the search for peace and truth -- these universal themes dominate the novel. Whether he is describing an affair of passion or the voracity of capitalism and the corruption of government, Gabriel García Márquez always writes with the simplicity, ease, and purity that are the mark of a master. Alternately reverential and comical, One Hundred Years of Solitude weaves the political, personal, and spiritual to bring a new consciousness to storytelling. Translated into dozens of languages, this stunning work is no less than an accounting of the history of the human race.", 'The Andromeda Strain': 'A team of scientists struggles to define and contain a deadly bacteria brought back from outer space by a satellite.', 'Congo': 'Armed with the latest gifts of advanced technology, a California scientist, a ruthless corporation agent, and a mercenary hunter face the dangers of the Congo jungle in search of the diamonds of the lost city of Zinj. Reprint.', 'Eleven Minutes': 'Eleven Minutes is the story of Maria, a young girl from a Brazilian village, whose first innocent brushes with love leave her heartbroken. At a tender age, she becomes convinced that she will never find true love, instead believing that "love is a terrible thing that will make you suffer. . . ." A chance meeting in Rio takes her to Geneva, where she dreams of finding fame and fortune. Maria\'s despairing view of love is put to the test when she meets a handsome young painter. In this odyssey of self-discovery, Maria has to choose between pursuing a path of darkness -- sexual pleasure for its own sake -- or risking everything to find her own "inner light" and the possibility of sacred sex, sex in the context of love. This P.S. edition features an extra 16 pages of insights into the book, including author interviews, recommended reading, and more.', 'Brave New World and Brave New World Revisited': "The astonishing novel Brave New World, originally published in 1932, presents Aldous Huxley's vision of the future -- of a world utterly transformed. Through the most efficient scientific and psychological engineering, people are genetically designed to be passive and therefore consistently useful to the ruling class. This powerful work of speculative fiction sheds a blazing critical light on the present and is considered to be Huxley's most enduring masterpiece. Following Brave New World is the nonfiction work Brave New World Revisited, first published in 1958. It is a fascinating work in which Huxley uses his tremendous knowledge of human relations to compare the modern-day world with the prophetic fantasy envisioned in Brave New World, including threats to humanity, such as overpopulation, propaganda, and chemical persuasion.", 'Good Omens': "According to The Nice and Accurate Prophecies of Agnes Nutter, Witch (the world's only completely accurate book of prophecies, written in 1655, before she exploded), the world will end on a Saturday. Next Saturday, in fact. Just before dinner. So the armies of Good and Evil are amassing, Atlantis is rising, frogs are falling, tempers are flaring. Everything appears to be going according to Divine Plan. Except a somewhat fussy angel and a fast-living demon—both of whom have lived amongst Earth's mortals since The Beginning and have grown rather fond of the lifestyle—are not actually looking forward to the coming Rapture. And someone seems to have misplaced the Antichrist . . .", 'Their Eyes Were Watching God': "One of the most important works of twentieth-century American literature, Zora Neale Hurston's beloved 1937 classic, Their Eyes Were Watching God, is an enduring Southern love story sparkling with wit, beauty, and heartfelt wisdom. Told in the captivating voice of a woman who refuses to live in sorrow, bitterness, fear, or foolish romantic dreams, it is the story of fair-skinned, fiercely independent Janie Crawford, and her evolving selfhood through three marriages and a life marked by poverty, trials, and purpose. A true literary wonder, Hurston's masterwork remains as relevant and affecting today as when it was first published -- perhaps the most widely read and highly regarded novel in the entire canon of African American literature.", 'A Tree Grows in Brooklyn': "The beloved American classic about a young girl's coming-of-age at the turn of the century, Betty Smith's A Tree Grows in Brooklyn is a poignant and moving tale filled with compassion and cruelty, laughter and heartache, crowded with life and people and incident. The story of young, sensitive, and idealistic Francie Nolan and her bittersweet formative years in the slums of Williamsburg has enchanted and inspired millions of readers for more than sixty years. By turns overwhelming, sublime, heartbreaking, and uplifting, the daily experiences of the unforgettable Nolans are raw with honesty and tenderly threaded with family connectedness -- in a work of literary art that brilliantly captures a unique time and place as well as incredibly rich moments of universal experience.", 'The Alchemist': 'Every few decades a book is published that changes the lives of its readers forever. The Alchemist is such a book. With over a million and a half copies sold around the world, The Alchemist has already established itself as a modern classic, universally admired. Paulo Coelho\'s charming fable, now available in English for the first time, will enchant and inspire an even wider audience of readers for generations to come. The Alchemist is the magical story of Santiago, an Andalusian shepherd boy who yearns to travel in search of a worldly treasure as extravagant as any ever found. From his home in Spain he journeys to the markets of Tangiers and across the Egyptian desert to a fateful encounter with the alchemist. The story of the treasures Santiago finds along the way teaches us, as only a few stories have done, about the essential wisdom of listening to our hearts, learning to read the omens strewn along life\'s path, and, above all, following our dreams.', 'Veronika Decides to Die': "Twenty-four-year-old Veronika seems to have everything -- youth and beauty, boyfriends and a loving family, a fulfilling job. But something is missing in her life. So, one cold November morning, she takes a handful of sleeping pills expecting never to wake up. But she does -- at a mental hospital where she is told that she has only days to live. Inspired by events in Coelho's own life, Veronika Decides to Die questions the meaning of madness and celebrates individuals who do not fit into patterns society considers to be normal. Bold and illuminating, it is a dazzling portrait of a young woman at the crossroads of despair and liberation, and a poetic, exuberant appreciation of each day as a renewed opportunity.", 'Coraline': "In Coraline's family's new flat there's a locked door. On the other side is a brick wall—until Coraline unlocks the door . . . and finds a passage to another flat in another house just like her own. Only different. The food is better there. Books have pictures that writhe and crawl and shimmer. And there's another mother and father there who want Coraline to be their little girl. They want to change her and keep her with them. . . . Forever. Coraline is an extraordinary fairy tale/nightmare from the uniquely skewed imagination of #1 New York Times bestselling author Neil Gaiman.", 'Stardust': 'Young Tristran Thorn will do anything to win the cold heart of beautiful Victoria—even fetch her the star they watch fall from the night sky. But to do so, he must enter the unexplored lands on the other side of the ancient wall that gives their tiny village its name. Beyond that old stone wall, Tristran learns, lies Faerie—where nothing, not even a fallen star, is what he imagined. From #1 New York Times bestselling author Neil Gaiman comes a remarkable quest into the dark and miraculous—in pursuit of love and the utterly impossible.', 'The Pact': "Until the phone calls came at three o'clock on a November morning, the Golds and their neighbors, the Hartes, had been inseparable. It was no surprise to anyone when their teenage children, Chris and Emily, began showing signs that their relationship was moving beyond that of lifelong friends. But now seventeen-year-old Emily is dead—shot with a gun her beloved and devoted Chris pilfered from his father's cabinet as part of an apparent suicide pact—leaving two devastated families stranded in the dark and dense predawn, desperate for answers about an unthinkable act and the children they never really knew. From New York Times bestselling author Jodi Picoult—one of the most powerful writers in contemporary fiction—comes a riveting, timely, heartbreaking, and terrifying novel of families in anguish and friendships ripped apart by inconceivable violence.", 'The Chronicles of Narnia (adult)': "Journeys to the end of the world, fantastic creatures, and epic battles between good and evil -- what more could any reader ask for in one book? The book that has it all is The Lion, the Witch and the Wardrobe, written in 1949 by Clive Staples Lewis. But Lewis did not stop there. Six more books followed, and together they became known as The Chronicles of Narnia. For the past fifty years, The Chronicles of Narnia have transcended the fantasy genre to become part of the canon of classic literature. Each of the seven books is a masterpiece, drawing the reader into a land where magic meets reality, and the result is a fictional world whose scope has fascinated generations. This edition presents all seven books -- unabridged -- in one impressive volume. The books are presented here according to Lewis' preferred order, each chapter graced with an illustration by the original artist, Pauline Baynes. Deceptively simple and direct, The Chronicles of Narnia continue to captivate fans with adventures, characters, and truths that speak to readers of all ages, even fifty years after they were first published.", 'The Trial': 'Written in 1914, The Trial is the terrifying tale of Josef K., a respectable bank officer who is suddenly arrested and must defend himself against a charge about which he can get no information. Kafka’s nightmare has resonated with chilling truth for generations of readers.', 'Frankenstein, Or, The Modern Prometheus': 'Edited by Maurice Hindle.', 'Emma': "New chronology and further reading; Tony Tanner's original introduction reinstated Edited with an introduction and notes by Flora Stafford.", 'A Tale of Two Cities': 'Edited with an Introduction and Notes by Richard Maxwell.', 'Mansfield Park': 'The private and social worlds of three families are revealed through the experiences of the heroine, Fanny Price.'
        }
        let images = {
            'Anansi Boys': 'http://books.google.com/books/content?id=VagoPwAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'One Hundred Years of Solitude': 'http://books.google.com/books/content?id=pgPWOaOctq8C&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'The Andromeda Strain': 'http://books.google.com/books/content?id=k6LVNLM_D-8C&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'Congo': 'http://books.google.com/books/content?id=Gp-fLBIrNY4C&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'Eleven Minutes': 'http://books.google.com/books/content?id=Qp0EZu3GCYsC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'Brave New World and Brave New World Revisited': 'http://books.google.com/books/content?id=3h9eNAyQWzAC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'Good Omens': 'http://books.google.com/books/content?id=7erEbfDOcgkC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'Their Eyes Were Watching God': 'http://books.google.com/books/content?id=Gz-d8SIFAcgC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'A Tree Grows in Brooklyn': 'http://books.google.com/books/content?id=Y-FZ9gRwMTYC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'The Alchemist': 'http://books.google.com/books/content?id=pTr44Sx6oWQC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'Veronika Decides to Die': 'http://books.google.com/books/content?id=dlgK3OfbiIEC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'Coraline': 'http://books.google.com/books/content?id=pXlAY0XnrQUC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'Stardust': 'http://books.google.com/books/content?id=NQ_cSYevzAEC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'The Pact': 'http://books.google.com/books/content?id=VDCvqF9o8RoC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'The Chronicles of Narnia (adult)': 'http://books.google.com/books/content?id=3VGkK_F9thYC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'The Trial': 'http://books.google.com/books/content?id=pLxfPwAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'Frankenstein, Or, The Modern Prometheus': 'http://books.google.com/books/content?id=6W24a29p9GQC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'Emma': 'http://books.google.com/books/content?id=6-ndr-0EMycC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'A Tale of Two Cities': 'http://books.google.com/books/content?id=-SalMNeuN5sC&printsec=frontcover&img=1&zoom=1&source=gbs_api', 'Mansfield Park': 'http://books.google.com/books/content?id=krnu-3b88JgC&printsec=frontcover&img=1&zoom=1&source=gbs_api'
        }
        const authors = {
            'Anansi Boys': 'Neil Gaiman', 'One Hundred Years of Solitude': 'Gabriel Garcia Marquez', 'The Andromeda Strain': 'Michael Crichton', 'Congo': 'Michael Crichton', 'Eleven Minutes': 'Paulo Coelho', 'Brave New World and Brave New World Revisited': 'Aldous Huxley', 'Good Omens': 'Neil Gaiman;Terry Pratchett', 'Their Eyes Were Watching God': 'Zora Neale Hurston', 'A Tree Grows in Brooklyn': 'Betty Smith', 'The Alchemist': 'Paulo Coelho', 'Veronika Decides to Die': 'Paulo Coelho', 'Coraline': 'Neil Gaiman', 'Stardust': 'Neil Gaiman', 'The Pact': 'Jodi Picoult', 'The Chronicles of Narnia (adult)': 'C. S. Lewis', 'The Trial': 'Franz Kafka', 'Frankenstein, Or, The Modern Prometheus': 'Mary Wollstonecraft Shelley', 'Emma': 'Jane Austen', 'A Tale of Two Cities': 'Charles Dickens', 'Mansfield Park': 'Jane Austen'
        }

        async function getRecommendation(notFirst) {

            lastDesc = document.getElementById("desc").innerText;
            lastImg = document.getElementById("book-img").getAttribute('src');
            lastAuthor = document.getElementById("author").innerText;

            let response;
            alreadyRecommended = alreadyRecommended.length === 0 ? "NONE" : alreadyRecommended;
            liked = liked.length === 0 ? "NONE" : liked;
            disliked = disliked.length === 0 ? "NONE" : disliked;

            document.getElementById('loading-spinner').style.display = 'block';
            document.getElementById("horizontal").style.display = "none";
            document.getElementById('desc').style.display = 'none';
            document.getElementById('back').style.visibility = 'hidden';
            document.getElementById('shelves').style.visibility = 'hidden';

            let userdata = localStorage.getItem("userdata");
            userdata = userdata == "" ? "25 year old female. Interested in history, adventures, and romance. " : userdata;

            response = await fetch(
                'https://noggin.rea.gent/empirical-damselfly-2712',
                {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        Authorization: 'Bearer rg_v1_fgn8qnnzx4gxq0a2qcj89a8ggrltaqrfcbc4_ngk',
                    },
                    body: JSON.stringify({
                        // fill variables here.
                        "data": "25 year old female. Interested in history, adventures, and romance. ",
                        "liked": liked,
                        "disliked": disliked,
                        "alreadysuggested": alreadyRecommended,
                    }),
                }
            ).then(response => response.text()
            ).then(console.log(response)
            ).then(response => JSON.parse(response));

            let [image, description, author] = getBookInfo(response["title"]);

            document.getElementById("result").innerText = response["title"];
            document.getElementById("desc").innerText = response["description"];
            document.getElementById("book-img").setAttribute('src', image);
            document.getElementById("author").innerText = response["author"];

            alreadyRecommended = alreadyRecommended == "NONE" ? [] : alreadyRecommended;
            alreadyRecommended.push(response["title"]);

            document.getElementById('loading-spinner').style.display = 'none';
            document.getElementById("horizontal").style.display = "flex";
            document.getElementById('desc').style.display = 'block';
            document.getElementById('shelves').style.visibility = 'visible';

            displayTags(response);

            currentRec = response["title"];

            //display go back button if needed
            if (notFirst == true) {
                document.getElementById("back").style.visibility = "visible";
            }
        }

        function getBookInfo(response) {
            let image = images[response];
            let description = descriptions[response];
            let author = authors[response];

            return [image, description, author];
        }

        const boldPalette = [
            '#FF0000', // Red
            '#FF7F00', // Dark Orange
            '#FFD700', // Gold
            '#00FF00', // Lime
            '#1E90FF', // Dodger Blue
            '#8A2BE2', // Blue Violet
            '#FF69B4', // Hot Pink
            '#DC143C', // Crimson
            '#FF4500', // Orange Red
            '#FF6347', // Tomato
            '#FF8C00', // Dark Orange
            '#FFA07A', // Light Salmon
            '#FFB6C1', // Light Pink
            '#FFC0CB', // Pink
            '#FFDAB9', // Peach Puff
            '#FFDEAD', // Navajo White
            '#FFE4B5', // Moccasin
            '#FFE4C4', // Bisque
            '#FFE4E1', // Misty Rose
            '#FFEFD5'  // Papaya Whip
        ];

        function getRandomColor() {
            const randomIndex = Math.floor(Math.random() * boldPalette.length);
            return boldPalette[randomIndex];
        }

        function displayTags(response) {
            let word1 = response["word1"];
            document.getElementById("word1").innerHTML = word1;
            document.getElementById("word1").style.backgroundColor = getRandomColor();
            let word2 = response["word2"];
            document.getElementById("word2").innerHTML = word2;
            document.getElementById("word2").style.backgroundColor = getRandomColor();
            let word3 = response["word3"];
            document.getElementById("word3").innerHTML = word3;
            document.getElementById("word3").style.backgroundColor = getRandomColor();
        }

        function goBack() {

            if (alreadyRecommended.length > 0) {
                let lastBook = alreadyRecommended[alreadyRecommended.length - 2];
                document.getElementById("result").innerText = lastBook;
                alreadyRecommended.pop();

                if (liked[liked.length - 1] == lastBook) {
                    liked.pop();
                }
                if (disliked[disliked.length - 1] == lastBook) {
                    disliked.pop();
                }

                document.getElementById("desc").innerText = lastDesc;
                document.getElementById("book-img").setAttribute('src', lastImg);
                document.getElementById("author").innerText = lastAuthor;
            }

        }

        let bool = false;
        if (alreadyRecommended.length > 0) {
            bool = true;
        }
        let button = document.getElementById("like");
        button.addEventListener("click", () => {
            let bool = false;
            if (alreadyRecommended.length > 0) {
                bool = true;
            }
            getRecommendation(bool);
            liked = liked == "NONE" ? [] : liked;
            liked.push(currentRec);
            const selectElements = document.getElementsByTagName("select");
            const selectElement = selectElements[0];
            selectElement.selectedIndex = 0;
        });
        button = document.getElementById("dislike");
        button.addEventListener("click", () => {
            let bool = false;
            if (alreadyRecommended.length > 0) {
                bool = true;
            }
            getRecommendation(bool);
            disliked = disliked == "NONE" ? [] : disliked;
            disliked.push(currentRec);

            // RESET SELECT DROPDOWN
            const selectElements = document.getElementsByTagName("select");
            const selectElement = selectElements[0];
            selectElement.selectedIndex = 0;
        });

        document.getElementById("back").addEventListener("click", goBack);

        getRecommendation(false);

        var books = { "Romance": [], "Fantasy": [], "Cry Worthy": [] };

        function addShelfButtons() {
            const shelfSection = document.getElementById("shelves");

            const shelfAdd = document.createElement("select");
            shelfAdd.className = "form-select form-select-sm";

            //Default button, doesnt do anything
            const option1 = document.createElement("option");
            option1.value = "Add to Shelf";
            option1.innerHTML = "<p style='font-style: italic'>Add to Shelf</p>";
            // option1.style.fontStyle = "italic";
            shelfAdd.appendChild(option1);

            const option2 = document.createElement("option");
            option2.value = "CreateShelf";
            option2.innerHTML = "Create New Shelf";
            shelfAdd.appendChild(option2);


            const option3 = document.createElement("option");
            option3.value = "Romance";
            option3.innerHTML = "Romance";
            shelfAdd.appendChild(option3);

            const option4 = document.createElement("option");
            option4.value = "Fantasy";
            option4.innerHTML = "Fantasy";
            shelfAdd.appendChild(option4);

            const option5 = document.createElement("option");
            option5.value = "Cry Worthy";
            option5.innerHTML = "Cry Worthy";
            shelfAdd.appendChild(option5);

            shelfSection.appendChild(shelfAdd);

            shelfAdd.addEventListener("change", () => {


                for (let i = 2; i < shelfAdd.length; i++) {
                    if (shelfAdd.value == shelfAdd[i].value) {
                        alert("Successfully added to " + shelfAdd.value + " shelf!");
                        //TO DO: add book to shelf storage
                        books[shelfAdd.value].push(document.getElementById("result").innerText);
                        localStorage.setItem("savedShelves", JSON.stringify(books));
                    }
                }


                if (shelfAdd.value == "CreateShelf") {
                    const newShelfName = prompt("Please enter the new shelf name: ", "Mystery");
                    if (newShelfName != null || newShelfName != "") {
                        //TO DO: add shelf to storage
                        alert("Successfully created " + newShelfName + " shelf!");
                        books[newShelfName] = [];
                    }
                    const option6 = document.createElement("option");
                    option6.value = newShelfName;
                    option6.innerHTML = newShelfName;
                    shelfAdd.appendChild(option6);
                }

            });

        }

        addShelfButtons();

        //Search button in the navbar
        let searchButton1 = document.getElementById("book-search-1");
        searchButton1.addEventListener(
        "click", () => {
            var input = document.getElementById("book-input-1").value;
            localStorage.setItem("search", input);
        }
        );



        //PROFILE FUNCTIONALITY

      const loginButton = document.querySelector(".btn-group");
      console.log(loginButton);
      loginButton.addEventListener("click", () => {
        window.location.replace("../profile/login_page.html"); 

      }
    
    );
    </script>





</body>




</html>