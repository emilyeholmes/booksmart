<!DOCTYPE html>
<html lang="en">

 <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My HTML Document</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    
    <!--  COLORS! 
    D4CBE5 (Thistle)
    70566D (Chinese Violet)
    42273B (Dark Purple)
    9E9885 (Khaki)
    7C7F65 (Reseda Green)
     -->


    <!-- <link
      href="https://fonts.googleapis.com/css?family=Fira+Sans"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/vendor/bootstrap/css/bootstrap.css"
    />
    <script src="/vendor/bootstrap/js/bootstrap.bundle.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/main.css" /> -->

    <style>
       @import url(https://fonts.googleapis.com/css?family=Merriweather:400,300,700);

        @import url(https://fonts.googleapis.com/css?family=Montserrat:400,700);

        .card {
            margin: 0 auto;
        }
        
        main {
            font-family: 'Montserrat', sans-serif;
        }

        .profile-name-input {
            margin-bottom: 16px;
        }

        .profile-card {
            max-width: 400px;
        }

        .profile-pic {
            width: 100px;
            height: 100px;
            border-radius: 6px;
            margin: 12px auto;
            display: block;
        }

        #myCarousel{
            width: 950px;
            margin: auto;
        }
        .card {
        margin: 0 auto;
        }

        .profile-name-input {
            margin-bottom: 16px;
        }

        .profile-card {
            max-width: 400px;
        }

        .profile-pic {
            width: 100px;
            height: 100px;
            border-radius: 6px;
            margin: 12px auto;
            display: block;
        }


        #blurb {
          text-align: center;
          max-width: 96%;
          font-family: 'Montserrat', sans-serif;
          align-items: center;
          justify-content: center;
          display: flex;
          color: #42273B;
        }

        #main-title {
          font-family: Georgia, 'Times New Roman', Times, serif;
          color: #588157;
          font-size: xx-large;
          font-weight: bolder;
          margin-right: 5vw;
          display: flex;
          flex-direction: row;
          justify-content: center;
          align-items: center;
        }

        #side-label {
          color: #588157;
          font-family: Georgia, 'Times New Roman', Times, serif;
          font-size: x-large;
          font-weight: bolder;
          text-decoration: none;
        }

        nav img {
          max-width: 100%; /* Ensures the image doesn't exceed the width of the nav */
    max-height: 100%; /* Ensures the image doesn't exceed the height of the nav */
    width: auto; /* Adjust as needed */
    height: auto; /* Adjust as needed */
        }

       

        body{
          background: #fbfbfb;
          /* font-family: 'Merriweather', serif; */
          font-family: 'Montserrat', sans-serif; /* Change the font-family here */
          font-size: 16px;
          color:#3a3a3a;
        }
        h1,h4{
          font-family: 'Montserrat', sans-serif;
        }
        .row{
          padding:50px 0;
        }
        .seperator{
          margin-bottom: 30px;
          width:35px;
          height:3px;
          background:#4a4a4a;
          border:none;
        }
        .title{
          text-align: center;
          
          .row{
            padding: 50px 0 0;
          }
          
          h1{
            text-transform: uppercase;
          }
          
          .seperator{
            margin: 0 auto 10px;
          }
        }
        .item {
          position: relative;
          margin-bottom: 30px;
          min-height: 1px;
          float: left;
          -webkit-backface-visibility: hidden;
          backface-visibility: hidden;
          -webkit-tap-highlight-color: transparent;
          -webkit-touch-callout: none;
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
          
          .item-in {
            background: #fff;
            padding: 40px;
            position: relative;
            
            &:hover:before {
              width: 100%;
            }
          
            &::before {
            content: "";
            position: absolute;
            bottom: 0px;
            height: 2px;
            width: 0%;
            background: #333333;
            right: 0px;
            -webkit-transition: width 0.4s;
            transition: width 0.4s;
            }
          }
        }
        .item{
          h4{
              font-size: 18px;
              margin-top: 25px;
              letter-spacing: 2px;
              text-transform: uppercase;
            }
            p{
              font-size: 12px;
            }
            a{
              font-family: 'Montserrat', sans-serif;
              font-size: 12px;
              text-transform: uppercase;
              color: #666666;
              margin-top: 10px;

              i {
                opacity: 0;
                padding-left: 0px;
                transition: 0.4s;
                font-size: 24px;
                display: inline-block;
                top: 5px;
                position: relative;
              }
              
              &:hover {
                text-decoration:none;
                i {
                  padding-left: 10px;
                  opacity: 1;
                  font-weight: 300;
                  }
                }
              }
            }
        .item .icon {
          position:absolute;
          top: 27px;
          left: -16px;
          cursor:pointer;
            a{
              font-family: 'Merriweather', serif;
              font-size: 14px;
              font-weight:400;
              color: #999;
              text-transform:none;
            }
            svg{
              width:32px;
              height:32px;
              float:left;
            }
            .icon-topic{
              opacity: 0;
              padding-left: 0px;
              transition: 0.4s;
              display: inline-block;
              top: 0px;
              position: relative;
            }
            &:hover .icon-topic{
              opacity: 1;
              padding-left: 10px;
            }
          }
        @media only screen and (max-width : 768px) {
          .item .icon{position: relative; top: 0; left:0;}
        }

        .container{
          margin: auto;
        }

        

        
      

        
    </style>
</head>

<body style="background-color: #D4CBE5;">
      <nav class="navbar bg-body-tertiary fixed-top">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
                aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand" href="../index.html" id="main-title">
              <img style='margin-right: 2vw; min-height: 7vh;'src="./booksmart-logo-small.png" alt="">
              BookSmart 
            </a>
            <!-- <div style="max-height: 90%; max-width: 90%;"></div> -->
            
            
            <form class="d-flex" role="search" action="../book-search/task1.html">
                <input class="form-control me-2" type="search" placeholder="Find a book!" aria-label="Search" id="book-input-1">
                <button class="btn btn-outline-success" type="submit" id="book-search-1">Search</button>
            </form>
            <!-- <img class="profile-pic" src="/images/profile.svg"/> -->

            <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar"
                aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasNavbarLabel">
                      <a id="side-label" href="../index.html">
                        <img style='margin-left: 1vw; margin-right: 1vw; min-height: 6vh; max-height: 7vh'src="./booksmart-logo-small.png" alt="">
                        BookSmart 
                      </a>
            
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="../index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="recommendations/task3.html">Recommendations</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../discussions/task2.html">Discussions</a>
                        </li>
                        <!-- <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                Dropdown
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">Action</a></li>
                                <li><a class="dropdown-item" href="#">Another action</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#">Something else here</a></li>
                            </ul>
                        </li> -->
                    </ul>
                </div>
            </div>

        <div class="btn-group">
            <button type="button" class="btn btn-secondary">
                <img src="images/profile.svg" alt="Button Image">
            </button>
        </div>


    </nav>
    
      
    
      <div
        class="modal fade"
        id="profilePicModal"
        tabindex="-1"
        aria-labelledby="profilePicModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="profilePicModalLabel">
                Change profile pic
              </h1>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <label for="profile-pic-file" class="form-label">
                Choose a new profile pic
              </label>

              <!-- Add a file uploader component here! -->
              <input class="form-control" type="file" id="avatar" name="avatar" accept="image/png, image/jpeg" />
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>




    <!-- <a href="recommendations/task3.html">Link to Recommendations</a>
    <a href="book-search/task1.html">Link to Search and Shelves</a>
    <a href="profile/pf_page.html">Link to Profile</a> -->

    <div id="blurb">
      <h2 style="max-width: 50%; font-weight: normal; ">Get personalized book recommendations, find out what people in your community are currently reading, and discuss the books you’ve read. </h2>
    </div>
    


    <h4 style='margin-top: 3vh; color: #42273B; margin-left: 18vw; font-weight: bold;'>Featured Books and Releases</h4>
    <div id="myCarousel" class="carousel slide" data-ride="carousel">
        <!-- Indicators -->
        <ol class="carousel-indicators">
          <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
          <li data-target="#myCarousel" data-slide-to="1"></li>
          <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>
      
        <!-- Wrapper for slides -->
        <div class="carousel-inner">
          <div class="item active">
            <img src="images/spring_release.webp" alt="Spring Releases">
          </div>
      
          <div class="item">
            <img src="images/taty.jpg" alt="New Release - Nonfiction">
          </div>
      
          <div class="item">
            <img src="images/the_familiar_ad.jpeg" alt="The Familiar">
          </div>
        </div>
      
        <!-- Left and right controls -->
        <a class="left carousel-control" href="#myCarousel" data-slide="prev">
          <span class="glyphicon glyphicon-chevron-left"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" data-slide="next">
          <span class="glyphicon glyphicon-chevron-right"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>

      <div class="container">
        <div class="row">
          <div class="col-md-6 item">
            <div class="item-in">
              <center>
              <img src="images/mieko.jpg" class="book-card"  width="300" height="450" >
              </center>
              <h4>BookSmart Spotlight by ZAKIA UDDIN</h4>
              <div class="seperator"></div>
              <p> Kawakami’s prose veers between hyperreal granularity and passages of hallucinatory transcendence that have a paradoxical clarity.</p>
              <a href="https://www.thewhitereview.org/reviews/mieko-kawakamis-breasts-and-eggs/">Read More
                <i class="fa fa-long-arrow-right"></i>
              </a>
            </div>
          </div>
          <div class="col-md-6 item">
            <div class="item-in">
              <center>
              <img src="images/open_water.jpg" class="book-card" width="300" height="450">
              </center>
              <h4>Second-Person Narrative in Nelson's <i>Open Water</i></h4>
              <div class="seperator"></div>
              <p>Narrated in the second person, the 'you' of the novel embodies a self that is at once a detached observer and a self-reflexive voice shaping the narrator’s own story... The gaze—that fleeting instant of exchange—weaves a significant undercurrent of belonging and alienation in the novel...</p>
              <a href="https://bookmarks.reviews/reviews/all/open-water/#:~:text=Narrated%20in%20the%20second%20person,alienation%20in%20the%20novel%20...">Read More
                <i class="fa fa-long-arrow-right"></i>
              </a>
            </div>
          </div>
        </div>
      </div>

      <script>
      $('.myCarousel').carousel({
        interval: 1000
      })

       let searchButton1 = document.getElementById("book-search-1");
       searchButton1.addEventListener(
        "click", () => {
            var input = document.getElementById("book-input-1").value;
            localStorage.setItem("search", input);
        }
       );

       const closeModal = () => {
        const modal = document.getElementById("profilePicModal");
        const modalInstance = bootstrap.Modal.getInstance(modal);
        modalInstance.hide();
      };

      // This function takes a data URL and resizes it down so it can be stored in localStorage.
      // Loading the image isn't instant, so the function returns a *Promise*.
      // You can use .then() to specify code that should run after the image is resized:
      // resizeAndCropPic(dataUrl).then((croppedDataUrl) => {
      //   // do something with croppedDataUrl
      // });
      // (or use async/await!)
      const resizeAndCropPic = (dataUrl) => {
        // crop to the center and resize to 512x512
        return new Promise((resolve) => {
          const canvas = document.createElement("canvas");
          [canvas.width, canvas.height] = [512, 512];
          const ctx = canvas.getContext("2d");

          const img = new Image();
          img.src = dataUrl;
          img.onload = () => {
            const [width, height] = [img.width, img.height];
            const [shorter, longer] =
              width < height ? [width, height] : [height, width];
            const [x, y] =
              width < height
                ? [0, (height - width) / 2]
                : [(width - height) / 2, 0];
            ctx.drawImage(img, x, y, shorter, shorter, 0, 0, 512, 512);
            const croppedDataUrl = canvas.toDataURL("image/jpeg");
            resolve(croppedDataUrl);
          };
        });
      };


      function saveName() {
        localStorage.setItem("currUser", username.value);
        // console.log(localStorage.getItem("currUser"));

      }


      window.onload = (event) => {
        if (localStorage.getItem("currUser")){
          document.getElementById("name-input").value = localStorage.getItem("currUser");
        }
        if (localStorage.getItem("profilePhoto")){
          document.getElementsByClassName("profile-pic")[0].src = localStorage.getItem("profilePhoto");
        }
      };
      

      var username = document.getElementById("name-input");
      //username.oninput = function() {saveName()};

      
      var profileUpload = document.getElementById("avatar");
      profileUpload.oninput = function() {uploadPhoto()};
      var profilePic = document.getElementsByClassName("profile-pic")[0];

      function uploadPhoto(){
        const file = document.getElementById("avatar").files[0];
        console.log(file);
        const reader = new FileReader();

        
        reader.addEventListener(
        "load",
        () => {
          // convert image file to base64 string
          resizeAndCropPic(reader.result).then((croppedDataUrl) => {
            localStorage.setItem("profilePhoto", croppedDataUrl);
            profilePic.src = croppedDataUrl;
          });
         
        },
        false,
      );

      if (file) {
        reader.readAsDataURL(file);
      }
      closeModal();
      }


      //PROFILE FUNCTIONALITY

      const loginButton = document.querySelector(".btn-group");
      
      loginButton.addEventListener("click", () => {
        if (localStorage.getItem("loggedIn")) {
          window.location.replace("../profile/pf_page.html"); 
          //localStorage.setItem("loggedIn", true);
        }
        else {
          window.location.replace("../profile/login_page.html"); 
        }
      });

      localStorage.setItem("Shelves", JSON.stringify(["Romance", "Fantasy", "Cry Worthy"]));
       
    

      </script>

<script>
  // Check if the page is being loaded for the first time or being refreshed
  if (performance.navigation.type === 1) {
      // Set the loggedIn item in localStorage to false
      localStorage.removeItem("loggedIn");
  }
</script>
      









</body>

</html>